#!/bin/sh
TRUNK=@OTTER_TRUNK@
COREUTILS="$TRUNK/experiments/coreutils-6.10"
NEWLIB_OTTER="$TRUNK/newlib-1.19.0/otter"
OTTER_CMD="$NEWLIB_OTTER/otter-with-libc"

echo "[Command] $0 $*"

"$OTTER_CMD" \
    --doRunRmtmps \
    @OTTER_FLAVOR@ \
    --lineCov \
    --initMallocZero \
    --initLocalZero \
    --untracked-functions="$NEWLIB_OTTER/library_functions" \
    --untracked-functions="$COREUTILS/benchmark/libcoreutils_functions" \
    --untracked-functions="$COREUTILS/benchmark/other_functions" \
    "$COREUTILS/benchmark/__otter_main_driver.c" --mainfn=__otter_main_driver \
    -lm \
    "$@"
